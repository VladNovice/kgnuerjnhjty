<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>INVESTCOIN Calculator</title>
  <style>
    :root {
      /* Цветовая палитра */
      --color-bg: #121212;
      --color-secondary-bg: #1E1E1E;
      --color-input-bg: #252525;
      --color-text: #E0E0E0;
      --color-secondary-text: #A0A0A0;
      
      /* Градиенты */
      --gradient-start: #333333;
      --gradient-end: #222222;
      --gradient-angle: 135deg;
      --gradient-hover: #404040;

      --color-risk: #FF453A;
      --color-profit: #32D74B;

      /* BingX brand colors */
      --bingx-grad-1: #00A6FF;
      --bingx-grad-2: #00D4FF;
      --bingx-grad-3: #5B3BFF;
    }

    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      background: var(--color-bg);
      color: var(--color-text);
      font-family: 'Segoe UI', Tahoma, sans-serif;
      height: 100%;
      width: 100%;
    }
    body {
      display: flex;
      flex-direction: column;
    }
    .container {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 16px;
      overflow-y: auto;
      background: var(--color-bg);
      max-width: 600px;
      margin: 0 auto;
      width: 100%;
    }
    
    /* ХЕДЕР */
    header.header { 
      margin-bottom: 24px; 
      margin-top: 12px; 
      display: flex;
      align-items: center; /* Центрируем лого и текст по вертикали */
      justify-content: flex-start; 
      padding: 0 4px;
      width: 100%;
    }
    
    /* Логотип IC */
    .logo-ic {
      color: #FFFFFF;
      font-weight: 900;
      font-size: 5rem; /* Еще больше */
      font-family: 'Arial Black', sans-serif;
      letter-spacing: -4px;
      line-height: 0.8; 
      flex-shrink: 0; 
      margin-right: 15px; /* Небольшой отступ до текста */
      text-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }

    /* Блок с текстом */
    .brand-text {
      flex: 1; /* Занимает ВСЁ оставшееся место */
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow: hidden;
    }

    /* Заголовок INVESTCOIN */
    .brand-text h1 { 
      display: flex;
      justify-content: space-between; /* Растягивает буквы от края до края */
      width: 100%;
      margin: 0;
      
      font-size: clamp(1.4rem, 7vw, 2.8rem); /* Адаптивный размер */
      color: #FFFFFF; 
      font-weight: 800; 
      line-height: 1;
      text-transform: uppercase;
    }
    
    /* Подпись */
    .brand-text p { 
      font-size: 0.75rem; 
      color: var(--color-secondary-text); 
      margin-top: 4px;
      letter-spacing: 0.5px;
      text-align: right; /* Подпись прижата вправо */
      width: 100%;
    }

    /* Навигация */
    .main-nav { display: flex; gap: 10px; justify-content: center; margin-bottom: 20px; background: var(--color-secondary-bg); padding: 4px; border-radius: 50px; }
    .nav-btn { flex: 1; padding: 10px 14px; background: transparent; border: none; border-radius: 50px; color: var(--color-secondary-text); cursor: pointer; font-weight: 600; transition: all 0.3s ease; }
    .nav-btn:hover { color: var(--color-text); }
    .nav-btn.active { background: linear-gradient(var(--gradient-angle), var(--gradient-start), var(--gradient-end)); color: #FFF; box-shadow: 0 2px 8px rgba(0,0,0,0.3); }

    .section { display: none; animation: fadeIn 0.3s ease; }
    .section.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

    /* Сетка и инпуты */
    .grid { display: grid; gap: 12px; }
    .grid-2 { grid-template-columns: 1fr 1fr; }
    
    input, select { 
      width: 100%; 
      padding: 16px; 
      background: var(--color-input-bg); 
      border: 1px solid #333; 
      border-radius: 12px; 
      color: var(--color-text); 
      font-size: 1rem; 
      transition: border-color 0.2s;
    }
    input:focus, select:focus { outline: none; border-color: #555; background: #2a2a2a; }
    input::placeholder { color: #666; }

    /* Кнопки действий */
    .btn { 
      padding: 14px 20px; 
      border-radius: 12px; 
      background: linear-gradient(var(--gradient-angle), var(--gradient-start), var(--gradient-end)); 
      border: 1px solid #333; 
      color: #FFF; 
      font-weight: 600; 
      font-size: 1rem; 
      cursor: pointer; 
      transition: transform 0.2s, box-shadow 0.2s; 
    }
    .btn:hover { background: var(--gradient-hover); }
    .btn:active { transform: scale(0.98); }

    .results { display: none; margin-top: 20px; background: var(--color-secondary-bg); padding: 20px; border-radius: 12px; text-align: center; font-size: 1.05rem; line-height: 1.6; border: 1px solid #333; }

    /* Блок ссылок */
    .actions { display: flex; flex-direction: column; gap: 14px; margin-top: 30px; }
    .btn-block { 
      display: flex; 
      align-items: center; 
      gap: 16px; 
      padding: 16px; 
      background: var(--color-secondary-bg); 
      border: 1px solid #2A2A2A;
      border-radius: 16px; 
      cursor: pointer; 
      transition: transform 0.2s, background 0.2s; 
      text-decoration: none; /* Для ссылок */
    }
    .btn-block:hover { transform: translateY(-2px); background: #252525; }
    
    /* Логотипы внутри кнопок */
    .btn-block img, .btn-block svg { 
      width: 44px; 
      height: 44px; 
      background: #FFFFFF; 
      border-radius: 12px; 
      padding: 4px; 
      object-fit: contain; 
      display: block; 
    }
    .brand-logo { background: none; padding: 0; border-radius: 12px; }

    .btn-content span { font-size: 1.1rem; font-weight: 700; color: #FFF; display: block; margin-bottom: 2px; }
    .btn-desc { font-size: 0.85rem; color: var(--color-secondary-text); }

    .entry-item { display: grid; grid-template-columns: 1fr 1fr auto; gap: 8px; align-items: center; margin-top: 8px; }
    .entry-item button { padding: 14px; background: #2a1a1a; border: 1px solid #3a1a1a; color: #ff5555; border-radius: 12px; cursor: pointer; }
    
    /* ФУТЕР (компактный) */
    footer.footer { 
      text-align: center; 
      padding: 10px 0; 
      color: #333; 
      font-size: 0.7rem; 
      margin-top: auto; 
    }
    
    @media (max-width: 500px) {
      .btn-block { padding: 14px; gap: 12px; }
      .btn-block img, .btn-block svg { width: 40px; height: 40px; }
      /* На мобильном чуть подстраиваем шрифт */
      .logo-ic { font-size: 4rem; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="header">
      <!-- Логотип IC слева -->
      <div class="logo-ic">IC</div>
      <!-- Текст занимает всё оставшееся место -->
      <div class="brand-text">
        <!-- Буквы разделены span для идеального растягивания (Flexbox) -->
        <h1>
          <span>I</span><span>N</span><span>V</span><span>E</span><span>S</span><span>T</span><span>C</span><span>O</span><span>I</span><span>N</span>
        </h1>
        <p>made by cryptans for cryptansr</p>
      </div>
    </header>

    <nav class="main-nav" aria-label="Главная навигация">
      <button class="nav-btn active" onclick="showSection('avg', event)">Средняя точка</button>
      <button class="nav-btn" onclick="showSection('risk', event)">Риск/Объём</button>
    </nav>

    <main class="main-content">
      <section id="avg" class="section active" aria-labelledby="avg-heading">
        <div class="grid">
          <div class="grid grid-2">
            <input type="number" id="newEntryPrice" placeholder="Цена входа" step="0.0001" min="0.0001" />
            <input type="number" id="newEntryAmount" placeholder="Объём" step="0.0001" min="0.0001" />
          </div>
          <div class="grid grid-2">
            <button class="btn" onclick="addEntry()">+ Добавить</button>
            <button class="btn" onclick="calculateAvg()">Рассчитать</button>
          </div>
          <div id="entries"></div>
        </div>
        <div id="avgResult" class="results" aria-live="polite"></div>
      </section>

      <section id="risk" class="section" aria-labelledby="risk-heading">
        <div class="grid">
          <select id="positionType">
            <option value="long">Long</option>
            <option value="short">Short</option>
          </select>
          <input type="number" id="deposit" placeholder="Депозит ($)" min="0.01" step="0.01" />
          <input type="number" id="riskPercent" placeholder="Риск на сделку (%)" step="0.1" min="0.1" max="100" />
          <input type="number" id="entryPrice" placeholder="Цена входа" step="0.0001" min="0.0001" />
          <input type="number" id="stopLoss" placeholder="Стоп-лосс" step="0.0001" min="0.0001" />
          <input type="number" id="takeProfit" placeholder="Тейк-профит (необязательно)" step="0.0001" min="0.0001" />
          <button class="btn" onclick="calculateRisk()">Рассчитать риск</button>
        </div>
        <div id="riskResult" class="results" aria-live="polite"></div>
      </section>
    </main>

    <div class="actions">
      <!-- Канал -->
      <div class="btn-block" onclick="window.open('https://t.me/investcoin_free','_blank')" role="link">
        <img src="https://cdn.jsdelivr.net/npm/simple-icons@v6/icons/telegram.svg" alt="Telegram" />
        <div class="btn-content"><span>INVESTCOIN Channel</span><div class="btn-desc">Канал о заработке на криптовалютах</div></div>
      </div>

      <!-- Bybit -->
      <div class="btn-block" onclick="window.open('https://partner.bybit.com/b/23588','_blank')" role="link">
        <img src="https://upload.wikimedia.org/wikipedia/commons/1/14/Bybit_Logo.svg" alt="Bybit" />
        <div class="btn-content"><span>Bybit</span><div class="btn-desc">Регистрация по реферальной ссылке</div></div>
      </div>

      <!-- BingX -->
      <div class="btn-block" onclick="window.open('https://bingx.com/invite/INVESTCOIN/','_blank')" role="link">
        <div id="bingxContainer">
          <svg id="bingxLogo" class="brand-logo" viewBox="0 0 100 100" width="44" height="44">
            <defs>
              <linearGradient id="bingxGrad" x1="0" x2="1" y1="0" y2="1">
                <stop offset="0" stop-color="var(--bingx-grad-1)"/>
                <stop offset="0.55" stop-color="var(--bingx-grad-2)"/>
                <stop offset="1" stop-color="var(--bingx-grad-3)"/>
              </linearGradient>
            </defs>
            <rect x="0" y="0" width="100" height="100" rx="20" fill="url(#bingxGrad)"></rect>
            <g transform="translate(18,12) scale(0.7)" fill="#FFFFFF" fill-opacity="0.98">
              <path d="M12 36 L32 12 L54 36 L32 60 Z"></path>
              <path d="M64 24 L76 24 L76 40 L64 40 Z"></path>
            </g>
          </svg>
        </div>
        <div class="btn-content">
          <span>BingX</span>
          <div class="btn-desc">Регистрация по реферальной ссылке</div>
        </div>
      </div>

      <!-- Торговый клуб (бот) -->
      <div class="btn-block" onclick="window.open('https://t.me/csklad_bot','_blank')" role="link">
        <img src="https://unpkg.com/heroicons@2.0.13/24/outline/users.svg" alt="Club" />
        <div class="btn-content"><span>Торговый клуб</span><div class="btn-desc">Вход через бота @csklad_bot</div></div>
      </div>
    </div>
  </div>

  <footer class="footer">© INVESTCOIN Calculator, 2025</footer>

  <script>
    let entries = [];

    function addEntry() {
      const price = parseFloat(document.getElementById('newEntryPrice').value);
      const amount = parseFloat(document.getElementById('newEntryAmount').value);
      if (isNaN(price) || price <= 0 || isNaN(amount) || amount <= 0) {
        alert('Введите корректные положительные значения');
        return;
      }
      if (entries.length >= 10) { alert('Максимум 10 точек входа'); return; }
      entries.push({ price, amount });
      document.getElementById('newEntryPrice').value = '';
      document.getElementById('newEntryAmount').value = '';
      renderEntries();
    }

    function renderEntries() {
      const container = document.getElementById('entries'); container.innerHTML = '';
      entries.forEach((e, i) => {
        const div = document.createElement('div'); div.className = 'entry-item';
        div.innerHTML = `
          <input type="number" value="${e.price}" readonly />
          <input type="number" value="${e.amount}" readonly />
          <button onclick="removeEntry(${i})">✕</button>
        `;
        container.appendChild(div);
      });
    }

    function removeEntry(idx) { entries.splice(idx, 1); renderEntries(); }

    function calculateAvg() {
      if (entries.length === 0) { alert('Добавьте точки входа'); return; }
      const totalValue = entries.reduce((sum, e) => sum + e.price * e.amount, 0);
      const totalAmount = entries.reduce((sum, e) => sum + e.amount, 0);
      const avg = totalValue / totalAmount;
      const avgRes = document.getElementById('avgResult');
      avgRes.textContent = `Средняя цена: ${avg.toFixed(4)}`;
      avgRes.style.display = 'block';
    }

    function calculateRisk() {
      const positionType = document.getElementById('positionType').value;
      let deposit = parseFloat(document.getElementById('deposit').value);
      let riskPercent = parseFloat(document.getElementById('riskPercent').value);
      let entryPrice = parseFloat(document.getElementById('entryPrice').value);
      let stopLoss = parseFloat(document.getElementById('stopLoss').value);
      const tpInput = document.getElementById('takeProfit').value;
      let takeProfit = tpInput ? parseFloat(tpInput) : null;

      if (isNaN(deposit) || deposit <= 0) { alert('Проверьте депозит'); return; }
      if (isNaN(riskPercent) || riskPercent <= 0 || riskPercent > 100) { alert('Проверьте риск %'); return; }
      if (isNaN(entryPrice) || entryPrice <= 0) { alert('Проверьте цену входа'); return; }
      if (isNaN(stopLoss) || stopLoss <= 0) { alert('Проверьте стоп-лосс'); return; }

      if (takeProfit !== null) {
        if (positionType === 'long' && stopLoss > entryPrice && takeProfit < entryPrice) {
          [stopLoss, takeProfit] = [takeProfit, stopLoss];
        }
        if (positionType === 'short' && stopLoss < entryPrice && takeProfit > entryPrice) {
          [stopLoss, takeProfit] = [takeProfit, stopLoss];
        }
      }

      if (positionType === 'long' && stopLoss >= entryPrice) { alert('Long: Стоп должен быть ниже входа'); return; }
      if (positionType === 'short' && stopLoss <= entryPrice) { alert('Short: Стоп должен быть выше входа'); return; }

      const riskAmount = deposit * (riskPercent / 100);
      const stopDiff = Math.abs(entryPrice - stopLoss);
      const contractSize = riskAmount / stopDiff;
      let profitAmount = null;
      if (takeProfit !== null) {
        profitAmount = contractSize * Math.abs(takeProfit - entryPrice);
      }

      const riskRes = document.getElementById('riskResult');
      let html = `
        <div style="font-size: 1.2em; font-weight: bold; margin-bottom: 8px;">Размер позиции: ${contractSize.toFixed(4)} монет</div>
        <div style="color: var(--color-risk)">Риск: -${riskAmount.toFixed(2)} $</div>
      `;
      if (profitAmount !== null) html += `<div style="color: var(--color-profit)">Профит: +${profitAmount.toFixed(2)} $ (R:R ${(profitAmount/riskAmount).toFixed(1)})</div>`;
      riskRes.innerHTML = html; riskRes.style.display = 'block';
    }

    function showSection(id, e) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      e.target.classList.add('active');
      document.getElementById('avgResult').style.display = 'none';
      document.getElementById('riskResult').style.display = 'none';
    }

    // Логика подгрузки JPG логотипа BingX (если есть файл bingx.jpg)
    (function(){
      const container = document.getElementById('bingxContainer');
      if (!container) return;
      const testImg = new Image();
      testImg.onload = function() {
        testImg.width = 44;
        testImg.height = 44;
        testImg.alt = 'BingX';
        testImg.style.borderRadius = '12px';
        testImg.style.padding = '4px';
        testImg.style.objectFit = 'contain';
        testImg.style.background = '#FFF'; 
        container.replaceWith(testImg);
      };
      testImg.src = 'bingx.jpg';
    })();
  </script>
</body>
</html>
